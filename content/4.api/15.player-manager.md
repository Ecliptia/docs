---
title: PlayerManager
description: "API reference for the PlayerManager class in Moonlink.js"
icon: 'lucide:music'
authors:
  - avatar: https://www.npmjs.com/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9hNmE5NDVhYjJiNzk1MjcyNzVjN2IwMWEyNWM1YzQ2NT9zaXplPTQ5NiZkZWZhdWx0PXJldHJvIn0.5hP6oyShhR-UWUi6KF-lA0cWmE_BJjvIFAwkYCGEZNo
    name: Lucas Morais Rodrigues
    username: 1Lucas1apk
    to: https://github.com/1Lucas1apk
    target: _blank
---

<branch version="1.0.x">

::card{icon="lucide:music"}
#title
PlayerManager Class

#description
The PlayerManager class is responsible for managing music players in Moonlink.js. It provides methods for creating, retrieving, and deleting players for different Discord guilds.
<br>
```js
manager.players
```
::

::alert{type="info" icon="lucide:info"}
The PlayerManager is accessed through the `players` property of the Manager instance. You don't need to create it manually.
::

## Overview

::card{icon="lucide:box"}
#title
Properties

#description
Core properties of the PlayerManager class.
<br>
<h5>Available Properties</h5>

#content
| Property | Type | Description |
|----------|------|-------------|
| `manager` | `Manager` | Reference to the Manager instance |
| `cache` | `Map<string, Player>` | Map containing all active players |
::

## Methods

::card{icon="lucide:settings"}
#title
Methods

#description
Methods available in the PlayerManager class.
<br>
<h5>Available Methods</h5>

#content
#### create
::field{name="create" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:plus'
  ---
  #title
  Create Player

  #description
  Creates a new player for a guild. Returns an existing player if one already exists for the guild.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="config" type="IPlayerConfig" required}
    Configuration for the player
    ::

    ::field{name="config.guildId" type="string" required}
    The ID of the guild
    ::

    ::field{name="config.voiceChannelId" type="string" required}
    The ID of the voice channel
    ::

    ::field{name="config.textChannelId" type="string" required}
    The ID of the text channel
    ::

    ::field{name="config.volume" type="number"}
    Initial volume (0-1000, default: 100)
    ::

    ::field{name="config.node" type="string"}
    Identifier of the node to use
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **[`Player`](./Player.md) | `undefined`** — The created player instance or `undefined` if no suitable node is found.

```js
// Basic player creation
const player = manager.players.create({
  guildId: interaction.guildId,
  voiceChannelId: interaction.member.voice.channelId,
  textChannelId: interaction.channelId
});

// Player with custom settings
const player = manager.players.create({
  guildId: '123456789',
  voiceChannelId: '987654321',
  textChannelId: '456789123',
  volume: 80,
  node: 'main-node'
});
```
  ::
::
::

#### get
::field{name="get" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:search'
  ---
  #title
  Get Player

  #description
  Gets a player by guild ID.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="guildId" type="string" required}
    The ID of the guild
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **[`Player`](./Player.md)** — The player instance or undefined if not found

```js
// Get an existing player
const player = manager.players.get('123456789');
if (player) {
  console.log(`Current volume: ${player.volume}`);
}
```
  ::
::
::

#### has
::field{name="has" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:check'
  ---
  #title
  Has Player

  #description
  Checks if a player exists for a guild.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="guildId" type="string" required}
    The ID of the guild
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — Whether the player exists

```js
// Check if a player exists
if (manager.players.has('123456789')) {
  console.log('Player exists for this guild');
}
```
  ::
::
::

#### delete
::field{name="delete" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:trash'
  ---
  #title
  Delete Player

  #description
  Deletes a player for a guild.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="guildId" type="string" required}
    The ID of the guild
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`Promise<void>`** — A Promise that resolves when the player is successfully deleted.

```js
// Delete a player
await manager.players.delete('123456789');
console.log('Player deleted successfully');
```
  ::
::
::

#### all
::field{name="all" type="property"}
::stack
  ::card
  ---
  icon: 'lucide:list'
  ---
  #title
  Get All Players

  #description
  Gets an array of all active players.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`Player[]`** — Array of all active players

```js
// Get all active players
const players = manager.players.all;
console.log(`Total active players: ${players.length}`);

// List all playing guilds
players.forEach(player => {
  console.log(`Guild ${player.guildId}: ${player.playing ? 'Playing' : 'Idle'}`);
});
```
  ::
::
::
::

## Usage Examples

::card{icon="lucide:code"}
#title
Basic Examples

#description
Simple examples of using the PlayerManager.

#content
### Creating and Managing a Player

```js
// Basic player creation and management
client.on('interactionCreate', async (interaction) => {
  if (!interaction.isCommand()) return;

  if (interaction.commandName === 'play') {
    // Check if user is in a voice channel
    if (!interaction.member.voice.channelId) {
      return interaction.reply('You must be in a voice channel!');
    }

    // Create or get existing player
    const player = manager.players.create({
      guildId: interaction.guildId,
      voiceChannelId: interaction.member.voice.channelId,
      textChannelId: interaction.channelId
    });

    // Search for a track
    const query = interaction.options.getString('song');
    const result = await manager.search(query);

    if (!result?.tracks?.length) {
      return interaction.reply('No results found!');
    }

    // Add track to queue
    player.queue.add(result.tracks[0]);
    
    if (!player.playing) {
      player.play();
    }

    interaction.reply(`Added ${result.tracks[0].title} to the queue!`);
  }

  if (interaction.commandName === 'stop') {
    // Check if player exists
    if (!manager.players.has(interaction.guildId)) {
      return interaction.reply('No music is playing!');
    }

    // Delete the player
    await manager.players.delete(interaction.guildId);
    interaction.reply('Stopped the music and left the channel!');
  }
});
```

### Player Status Monitoring

```js
// Command to check player status
client.on('interactionCreate', async (interaction) => {
  if (!interaction.isCommand()) return;

  if (interaction.commandName === 'status') {
    const players = manager.players.all;
    
    if (players.length === 0) {
      return interaction.reply('No active players');
    }

    const status = players.map(player => ({
      guild: player.guildId,
      playing: player.playing,
      track: player.current?.title || 'None',
      volume: player.volume
    }));

    const embed = {
      title: 'Player Status',
      fields: status.map(s => ({
        name: `Guild: ${s.guild}`,
        value: `Playing: ${s.playing ? 'Yes' : 'No'}\nTrack: ${s.track}\nVolume: ${s.volume}%`
      })),
      color: 0x3498db
    };

    interaction.reply({ embeds: [embed] });
  }
});
```

### Basic Error Handling

```js
// Example of handling player errors
client.on('interactionCreate', async (interaction) => {
  if (!interaction.isCommand()) return;

  if (interaction.commandName === 'play') {
    try {
      const player = manager.players.create({
        guildId: interaction.guildId,
        voiceChannelId: interaction.member.voice.channelId,
        textChannelId: interaction.channelId
      });

      // Your play logic here
    } catch (error) {
      console.error('Error creating player:', error);
      interaction.reply('Failed to create player. Please try again.');
    }
  }
});

// Handle player connection errors
manager.on('playerError', (player, error) => {
  const channel = client.channels.cache.get(player.textChannelId);
  if (channel) {
    channel.send('An error occurred with the player. Cleaning up...');
  }
  manager.players.delete(player.guildId);
});
```
::

## Player Manager

::button-link{right-icon="lucide:arrow-right" to="/api/node-manager"}
  Continue to NodeManager
:: 