---
title: DatabaseManager
description: Handles the internal data persistence for queues, sessions, and player states. Supports both 'memory' and 'local' (file-based) storage.
icon: lucide:database
---

The `DatabaseManager` is responsible for abstracting the storage layer. Moonlink.js uses this to persist player queues and session data, allowing for features like auto-resume even after a bot restart (if using the `local` provider).

## Properties

::api-properties{name="Database Properties" description="Internal state of the database manager."}
::api-section{title="Configuration"}
::
::api-schema{name="provider" type="Memory | Local"}
The active database provider instance.
::
::

## Methods

### initialize()
::api-card{name="initialize()" method="initialize" returns="Promise<void>" anchorId="initialize"}
#description
Initializes the underlying database provider (e.g., opens the file connection or connects to the server).
**Note:** Called automatically by `manager.init()`.

#example
```ts
await manager.database.initialize();
```
::

### get(key)
::api-card{name="get(key)" method="get" returns="Promise<T | undefined>" anchorId="get"}
#description
Retrieves a value from the database.

#default
::api-schema{name="key" type="string" required}
The key to retrieve.
::

#example
```ts
const session = await manager.database.get("sessions.123");
```
::

### set(key, value)
::api-card{name="set(key, value)" method="set" returns="Promise<void>" anchorId="set"}
#description
Saves a value to the database.

#default
::api-schema{name="key" type="string" required}
The key to store.
::
::api-schema{name="value" type="any" required}
The value to store.
::

#example
```ts
await manager.database.set("config.volume", 50);
```
::

### has(key)
::api-card{name="has(key)" method="has" returns="Promise<boolean>" anchorId="has"}
#description
Checks if a key exists in the database.

#default
::api-schema{name="key" type="string" required}
The key to check.
::

#example
```ts
if (await manager.database.has("players.123")) {
    console.log("Player data exists.");
}
```
::

### remove(key)
::api-card{name="remove(key)" method="remove" returns="Promise<boolean>" anchorId="remove"}
#description
Deletes a specific key from the database.

#default
::api-schema{name="key" type="string" required}
The key to remove.
::

#example
```ts
await manager.database.remove("cache.temp");
```
::

### keys(pattern)
::api-card{name="keys(pattern)" method="keys" returns="Promise<string[]>" anchorId="keys"}
#description
Retrieves all keys, optionally matching a pattern.

#default
::api-schema{name="pattern" type="string"}
Optional regex-like pattern.
::

#example
```ts
const playerKeys = await manager.database.keys("players.*");
```
::

### clear()
::api-card{name="clear()" method="clear" returns="Promise<void>" anchorId="clear"}
#description
Wipes all data from the database.

#example
```ts
await manager.database.clear();
```
::

### shutdown()
::api-card{name="shutdown()" method="shutdown" returns="Promise<void>" anchorId="shutdown"}
#description
Gracefully closes the database connection.

#example
```ts
await manager.database.shutdown();
```
::
