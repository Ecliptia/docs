---
title: PlayerManager
description: Manages the lifecycle of audio players, allowing creation, retrieval, filtering, and destruction of voice connections.
icon: lucide:disc-3
---

The `PlayerManager` is your gateway to managing voice sessions. It allows you to create new players for specific guilds, retrieve existing ones, and perform bulk operations like finding specific players or clearing all sessions.

## Properties

::api-properties{name="PlayerManager Properties" description="Core components and state accessible via the PlayerManager instance."}
::api-section{title="References"}
::
::api-schema{name="manager" type="Manager" typeLink="/api/manager"}
The main Moonlink Manager instance.
::
::api-schema{name="players" type="Map<string, Player>"}
A standard JavaScript `Map` containing all active players, keyed by the Guild ID.
::

::api-section{title="State & Filters"}
::
::api-schema{name="size" type="number"}
The total number of active players.
::
::api-schema{name="all" type="Player[]"}
Returns an array of all active players.
::
::api-schema{name="playingPlayers" type="Player[]"}
Returns an array of players that are currently playing a track.
::
::api-schema{name="idlePlayers" type="Player[]"}
Returns an array of players that are currently idle (not playing).
::
::

## Methods

### create(options)
::api-card{name="create(options)" method="create" returns="Player" anchorId="create"}
#description
Creates a new player for a guild. If a player already exists for that guild, it returns the existing one.
It automatically selects the best available node for the new player.

#default
::api-schema{name="options" type="IPlayerConfig" required}
Configuration for the new player.
::

::api-section{title="IPlayerConfig"}
::

::api-schema{name="guildId" type="string" required nested}
The ID of the guild.
::
::api-schema{name="voiceChannelId" type="string" required nested}
The ID of the voice channel to connect to.
::
::api-schema{name="textChannelId" type="string" nested}
Optional. ID of the text channel for sending updates.
::
::api-schema{name="volume" type="number" nested}
Initial volume (0-1000). Default is 100.
::

#example
```ts
const player = manager.players.create({
    guildId: '123456789012345678',
    voiceChannelId: '987654321098765432',
    textChannelId: '456789012345678901',
    volume: 80
});

// Connect to the voice channel
player.connect({ setDeaf: true, setMute: false });
```
::

### get(guildId)
::api-card{name="get(guildId)" method="get" returns="Player | undefined" anchorId="get"}
#description
Retrieves an existing player by Guild ID.

#default
::api-schema{name="guildId" type="string" required}
The ID of the guild.
::

#example
```ts
const player = manager.players.get("123456789012345678");
if (player) {
    player.pause(true);
}
```
::

### has(guildId)
::api-card{name="has(guildId)" method="has" returns="boolean" anchorId="has"}
#description
Checks if a player exists for the specified Guild ID.

#default
::api-schema{name="guildId" type="string" required}
The ID of the guild.
::

#example
```ts
if (manager.players.has("123456789012345678")) {
    console.log("Music is already active in this server.");
}
```
::

### destroy(guildId, reason)
::api-card{name="destroy(guildId, reason)" method="destroy" returns="Promise<boolean>" anchorId="destroy"}
#description
Destroys a specific player, disconnecting it from the voice channel and cleaning up resources. Returns `true` if a player was found and destroyed.

#default
::api-schema{name="guildId" type="string" required}
The ID of the guild.
::
::api-schema{name="reason" type="string"}
Optional reason for destruction.
::

#example
```ts
await manager.players.destroy("123456789012345678", "Command invoked");
```
::

### destroyAll()
::api-card{name="destroyAll()" method="destroyAll" returns="Promise<void>" anchorId="destroyall"}
#description
Destroys all active players. Useful during bot shutdown.
(Alias for `clear()`).

#example
```ts
process.on("SIGINT", async () => {
    await manager.players.destroyAll();
    process.exit(0);
});
```
::

### filter(predicate)
::api-card{name="filter(predicate)" method="filter" returns="Player[]" anchorId="filter"}
#description
Filters active players based on a condition.

#default
::api-schema{name="predicate" type="(player: Player) => boolean" required}
The function to test each player.
::

#example
```ts
// Find players with high volume
const loudPlayers = manager.players.filter(p => p.volume > 200);
```
::

### find(predicate)
::api-card{name="find(predicate)" method="find" returns="Player | undefined" anchorId="find"}
#description
Finds the first player that matches a condition.

#default
::api-schema{name="predicate" type="(player: Player) => boolean" required}
The function to test each player.
::

#example
```ts
// Find a player in a specific voice channel
const player = manager.players.find(p => p.voiceChannelId === "987654321...");
```
::

### map(callback)
::api-card{name="map(callback)" method="map" returns="T[]" anchorId="map"}
#description
Maps all players to a new array of values.

#default
::api-schema{name="callback" type="(player: Player) => T" required}
The function to transform each player.
::

#example
```ts
// Get a list of all Guild IDs with active players
const guildIds = manager.players.map(p => p.guildId);
```
::
