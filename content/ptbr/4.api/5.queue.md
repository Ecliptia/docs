---
title: Queue
description: "Referência da API para a classe Queue em Moonlink.js"
icon: 'lucide:list-ordered'
authors:
  - avatar: https://www.npmjs.com/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9hNmE5NDVhYjJiNzk1MjcyNzVjN2IwMWEyNWM1YzQ2NT9zaXplPTQ5NiZkZWZhdWx0PXJldHJvIn0.5hP6oyShhR-UWUi6KF-lA0cWmE_BJjvIFAwkYCGEZNo
    name: Lucas Morais Rodrigues
    username: 1Lucas1apk
    to: https://github.com/1Lucas1apk
    target: _blank
---

A classe `Queue` gerencia a fila de faixas de um player, permitindo adicionar, remover e manipular faixas. A fila é persistente e sincronizada com o banco de dados interno.

::alert{type="info" icon="lucide:info"}
A fila é um componente essencial para gerenciar várias faixas em um bot de música. Ela fornece métodos para adicionar, remover e manipular a ordem das faixas, com persistência automática.
::

## Propriedades

| Propriedade | Tipo | Descrição | Padrão |
|----------|------|-------------|---------|
| `database` | `Database` | Instância do banco de dados para persistência | Obrigatório |
| `guildId` | `string` | ID do servidor associado à fila | Obrigatório |
| `player` | `Player` | A instância do player ao qual esta fila pertence | Obrigatório |
| `tracks` | `Track[]` | Array contendo todas as faixas na fila | `[]` |
| `size` | `number` | Número de faixas na fila | `0` |
| `duration` | `number` | Duração total de todas as faixas na fila (milissegundos) | `0` |
| `isEmpty` | `boolean` | Se a fila está vazia | `true` |
| `first` | `Track` | A primeira faixa na fila | `null` |
| `last` | `Track` | A última faixa na fila | `null` |
| `all` | `Track[]` | Todas as faixas atualmente na fila | `[]` |
| `position` | `number` | A posição atual da faixa em reprodução na fila (índice baseado em 0) | `0` |
| `previous` | `Track[]` | Todas as faixas antes da faixa atualmente em reprodução na fila | `[]` |

## Métodos

#### add
::field{name="add" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:plus'
  ---
  #title
  Adicionar Faixa

  #description
  Adiciona uma faixa ou um array de faixas à fila e a persiste no banco de dados. Filtra faixas na lista negra. Emite o evento `queueAdd`.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="track" type="Track | Track[]" required}
    A faixa ou array de faixas a ser adicionado
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — Se a faixa foi adicionada com sucesso

  ```js
  queue.add(track);
  ```
  ::
::
::

#### get
::field{name="get" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:search'
  ---
  #title
  Obter Faixa

  #description
  Obtém uma faixa em uma posição específica na fila.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="position" type="number" required}
    Posição da fila (índice baseado em 0)
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Track`** — A faixa na posição especificada

  ```js
  const track = queue.get(0); // Obter primeira faixa
  ```
  ::
::
::

#### has
::field{name="has" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:check'
  ---
  #title
  Tem Faixa

  #description
  Verifica se uma faixa específica está na fila.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="track" type="Track" required}
    A faixa a ser verificada
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — Se a faixa existe na fila

  ```js
  if (queue.has(track)) {
    console.log('Faixa está na fila');
  }
  ```
  ::
::
::

#### remove
::field{name="remove" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:minus'
  ---
  #title
  Remover Faixa

  #description
  Remove uma faixa em uma posição específica e atualiza o banco de dados. Emite o evento `queueRemove`.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="position" type="number" required}
    Posição da fila (índice baseado em 0)
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — Se a faixa foi removida com sucesso

  ```js
  queue.remove(0); // Remover primeira faixa
  ```
  ::
::
::

#### shift
::field{name="shift" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:arrow-left'
  ---
  #title
  Remover Primeira Faixa

  #description
  Remove e retorna a primeira faixa da fila. Emite o evento `queueRemove`.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Track`** — A primeira faixa na fila

  ```js
  const nextTrack = queue.shift();
  ```
  ::
::
::

#### unshift
::field{name="unshift" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:arrow-right'
  ---
  #title
  Adicionar no Início da Fila

  #description
  Adiciona uma faixa ao início da fila. Emite o evento `queueAdd`.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="track" type="Track" required}
    A faixa a ser adicionada
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — Se a faixa foi adicionada com sucesso

  ```js
  queue.unshift(track);
  ```
  ::
::
::

#### pop
::field{name="pop" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:arrow-up'
  ---
  #title
  Remover Última Faixa

  #description
  Remove e retorna a última faixa da fila. Emite o evento `queueRemove`.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Track`** — A última faixa na fila

  ```js
  const lastTrack = queue.pop();
  ```
  ::
::
::

#### clear
::field{name="clear" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:trash'
  ---
  #title
  Limpar Fila

  #description
  Limpa todas as faixas da fila e remove do banco de dados. Emite o evento `queueRemove`.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — Se a fila foi limpa com sucesso

  ```js
  queue.clear();
  ```
  ::
::
::

#### shuffle
::field{name="shuffle" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:shuffle'
  ---
  #title
  Embaralhar Fila

  #description
  Embaralha aleatoriamente as faixas na fila usando Math.random().
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — Se a fila foi embaralhada com sucesso

  ```js
  queue.shuffle();
  ```
  ::
::
::

#### removeDuplicates
::field{name="removeDuplicates" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:copy-slash'
  ---
  #title
  Remover Duplicatas

  #description
  Remove faixas duplicadas da fila com base em sua string codificada. Retorna `true` se as duplicatas foram removidas, `false` caso contrário.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — Se as duplicatas foram removidas.

  ```js
  const removed = queue.removeDuplicates();
  if (removed) {
    console.log('Duplicatas removidas da fila.');
  }
  ```
  ::
::
::

#### removeBlacklistedTracks
::field{name="removeBlacklistedTracks" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:ban'
  ---
  #title
  Remover Faixas na Lista Negra

  #description
  Remove faixas da fila cuja fonte está na lista `blacklistedSources` do gerenciador. Emite o evento `trackBlacklisted` para cada faixa removida.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — `true` se alguma faixa na lista negra foi removida, `false` caso contrário.

  ```js
  const removed = queue.removeBlacklistedTracks();
  if (removed) {
    console.log('Faixas na lista negra removidas da fila.');
  }
  ```
  ::
::
::

#### sortByTitle
::field{name="sortByTitle" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:sort-asc'
  ---
  #title
  Ordenar por Título

  #description
  Ordena a fila alfabeticamente pelo título da faixa.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — `true` se a fila foi ordenada, `false` se houver menos de 2 faixas.

  ```js
  queue.sortByTitle();
  ```
  ::
::
::

#### sortByAuthor
::field{name="sortByAuthor" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:sort-asc'
  ---
  #title
  Ordenar por Autor

  #description
  Ordena a fila alfabeticamente pelo autor da faixa.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — `true` se a fila foi ordenada, `false` se houver menos de 2 faixas.

  ```js
  queue.sortByAuthor();
  ```
  ::
::
::

#### sortByDuration
::field{name="sortByDuration" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:sort-asc'
  ---
  #title
  Ordenar por Duração

  #description
  Ordena a fila pela duração da faixa em ordem crescente.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — `true` se a fila foi ordenada, `false` se houver menos de 2 faixas.

  ```js
  queue.sortByDuration();
  ```
  ::
::
::

#### find
::field{name="find" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:search'
  ---
  #title
  Encontrar Faixa

  #description
  Encontra uma faixa na fila por seu identificador ou por uma correspondência parcial em seu título.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="query" type="string" required}
    O identificador ou uma parte do título a ser pesquisado.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Track | undefined`** — A faixa encontrada ou `undefined` se não encontrada.

  ```js
  const foundTrack = queue.find('my-track-id');
  if (!foundTrack) {
    const anotherTrack = queue.find('título da música');
  }
  ```
  ::
::
::

#### move
::field{name="move" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:arrow-right-left'
  ---
  #title
  Mover Faixa

  #description
  Move uma faixa de uma posição para outra dentro da fila.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="from" type="number" required}
    O índice inicial baseado em 0 da faixa a ser movida.
    ::

    ::field{name="to" type="number" required}
    O índice de destino baseado em 0 para onde a faixa deve ser movida.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — `true` se a faixa foi movida com sucesso, `false` caso contrário.

  ```js
  queue.move(0, 2); // Move a primeira faixa para a terceira posição
  ```
  ::
::
::

#### moveRange
::field{name="moveRange" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:arrows-right-left'
  ---
  #title
  Mover Intervalo

  #description
  Move um intervalo contíguo de faixas de uma posição para outra dentro da fila. Emite o evento `queueMoveRange`.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="fromIndex" type="number" required}
    O índice inicial baseado em 0 do intervalo a ser movido.
    ::
    ::field{name="toIndex" type="number" required}
    O índice de destino baseado em 0 para onde o intervalo deve ser movido.
    ::
    ::field{name="count" type="number" required}
    O número de faixas a serem movidas.
    ::
  ::
  ::

  ::card
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — `true` se as faixas foram movidas com sucesso, `false` caso contrário.

  ```js
  // Move 2 faixas começando do índice 0 para o índice 3
  queue.moveRange(0, 3, 2);
  ```
  ::
::
::

#### removeRange
::field{name="removeRange" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:minus-square'
  ---
  #title
  Remover Intervalo

  #description
  Remove um intervalo de faixas da fila. Emite o evento `queueRemoveRange`.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="startIndex" type="number" required}
    O índice inicial baseado em 0 do intervalo a ser removido.
    ::
    ::field{name="endIndex" type="number" required}
    O índice final baseado em 0 do intervalo a ser removido (inclusive).
    ::
  ::
  ::

  ::card
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — `true` se as faixas foram removidas com sucesso, `false` caso contrário.

  ```js
  // Remove faixas do índice 1 ao 3 (inclusive)
  queue.removeRange(1, 3);
  ```
  ::
::
::

#### duplicate
::field{name="duplicate" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:copy'
  ---
  #title
  Duplicar Faixa

  #description
  Duplica uma faixa na fila um número especificado de vezes. As faixas duplicadas são inseridas imediatamente após a faixa original. Emite o evento `queueDuplicate`.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="index" type="number" required}
    O índice baseado em 0 da faixa a ser duplicada.
    ::
    ::field{name="count" type="number" defaultValue="1"}
    O número de vezes para duplicar a faixa.
    ::
  ::
  ::

  ::card
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — `true` se a faixa foi duplicada com sucesso, `false` caso contrário.

  ```js
  // Duplica a primeira faixa uma vez
  queue.duplicate(0);

  // Duplica a segunda faixa 3 vezes
  queue.duplicate(1, 3);
  ```
  ::
::
::

#### jump
::field{name="jump" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:skip-forward'
  ---
  #title
  Pular para Faixa

  #description
  Remove todas as faixas antes do índice especificado, efetivamente tornando a faixa no índice dado a nova primeira faixa na fila.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="index" type="number" required}
    O índice baseado em 0 da faixa para a qual pular.
    ::
  ::
  ::

  ::card
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — `true` se o pulo foi bem-sucedido, `false` caso contrário.

  ```js
  // Torna a faixa no índice 5 a nova primeira faixa
  queue.jump(5);
  ```
  ::
::
::

#### slice
::field{name="slice" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:scissors'
  ---
  #title
  Fatiar Fila

  #description
  Retorna uma cópia superficial de uma porção da fila em um novo objeto de array selecionado de `start` a `end` (fim não incluído).
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="start" type="number" required}
    O índice inicial baseado em 0 da porção especificada da fila.
    ::

    ::field{name="end" type="number"}
    O índice final baseado em 0 da porção especificada da fila. `slice` extrai até (mas não incluindo) `end`.
    ::
  ::
  ::

  ::card
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Track[]`** — Um novo array contendo os elementos extraídos.

  ```js
  const firstTwoTracks = queue.slice(0, 2);
  ```
  ::
::
::

#### filter
::field{name="filter" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:filter'
  ---
  #title
  Filtrar Fila

  #description
  Cria um novo array com todos os elementos que passam no teste implementado pela função fornecida.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="predicate" type="(track: Track) => boolean" required}
    Função para testar cada elemento da fila. Retorne `true` para manter o elemento, `false` caso contrário.
    ::
  ::
  ::

  ::card
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Track[]`** — Um novo array com os elementos que passam no teste.

  ```js
  const longTracks = queue.filter(track => track.duration > 300000); // Faixas com mais de 5 minutos
  ```
  ::
::
::

#### reverse
::field{name="reverse" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:arrow-down-up'
  ---
  #title
  Inverter Fila

  #description
  Inverte a ordem dos elementos na fila no local.
  <br>
  ::

  ::card
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`boolean`** — `true` se a fila foi invertida com sucesso, `false` caso contrário.

  ```js
  queue.reverse();
  ```
  ::
::
::
