---
title: Voice
description: Manages the Discord voice connection lifecycle, handling state updates, server updates, and automatic reconnection logic.
icon: lucide:mic
---

The `Voice` class handles the low-level details of connecting to a Discord voice channel. It listens for voice server/state updates from Discord and forwards the necessary credentials (session ID, token, endpoint) to the Lavalink node to establish the audio stream.

## Properties

::api-properties{name="Voice Properties" description="Internal state of the voice connection."}
::api-section{title="Connection Info"}
::
::api-schema{name="player" type="Player" typeLink="/api/player"}
The player instance this voice connection belongs to.
::
::api-schema{name="sessionId" type="string | null"}
The session ID received from Discord `VOICE_STATE_UPDATE`.
::
::api-schema{name="token" type="string | null"}
The token received from Discord `VOICE_SERVER_UPDATE`.
::
::api-schema{name="endpoint" type="string | null"}
The voice server endpoint received from Discord.
::

::api-section{title="State"}
::
::api-schema{name="state" type="VoiceConnectionState"}
Current connection state (`DISCONNECTED`, `CONNECTING`, `CONNECTED`, `DESTROYED`).
::
::api-schema{name="isMoving" type="boolean"}
True if the player is currently moving between voice channels.
::
::

## Methods

### connect(options)
::api-card{name="connect(options)" method="connect" returns="Promise<void>" anchorId="connect"}
#description
Initiates the connection handshake with Discord. Sends the Gateway Opcode 4 payload.

#default
::api-schema{name="options" type="object"}
Configuration for the connection.
::

::api-section{title="options"}
::
::api-schema{name="selfDeaf" type="boolean" required nested}
Whether to join deafened.
::
::api-schema{name="selfMute" type="boolean" required nested}
Whether to join muted.
::

#example
```ts
await player.voice.connect({ selfDeaf: true, selfMute: false });
```
::

### disconnect()
::api-card{name="disconnect()" method="disconnect" returns="Promise<void>" anchorId="disconnect"}
#description
Disconnects from the voice channel by sending an Opcode 4 payload with a null channel ID.

#example
```ts
await player.voice.disconnect();
```
::

### destroy()
::api-card{name="destroy()" method="destroy" returns="void" anchorId="destroy"}
#description
Marks the voice connection as destroyed and cleans up listeners.

#example
```ts
player.voice.destroy();
```
::

### check(connected)
::api-card{name="check(connected)" method="check" returns="void" anchorId="check"}
#description
Checks the connection health. If the connection has failed multiple times consecutively, it triggers a recovery attempt.

#default
::api-schema{name="connected" type="boolean" required}
Whether the player is currently considered connected by the node.
::
::

### handleStateUpdate(data)
::api-card{name="handleStateUpdate(data)" method="handleStateUpdate" returns="Promise<void>" anchorId="handlestateupdate"}
#description
Internal method to handle `VOICE_STATE_UPDATE` packets from Discord. Updates the session ID and channel ID.

#default
::api-schema{name="data" type="object" required}
The raw packet data.
::
::

### handleServerUpdate(data)
::api-card{name="handleServerUpdate(data)" method="handleServerUpdate" returns="void" anchorId="handleserverupdate"}
#description
Internal method to handle `VOICE_SERVER_UPDATE` packets from Discord. Updates the token and endpoint.

#default
::api-schema{name="data" type="object" required}
The raw packet data.
::
::
