---
title: REST API
description: "Referência da API para a API REST em Moonlink.js"
icon: 'lucide:globe'
authors:
  - avatar: https://www.npmjs.com/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9hNmE5NDVhYjJiNzk1MjcyNzVjN2IwMWEyNWM1YzQ2NT9zaXplPTQ5NiZkZWZhdWx0PXJldHJvIn0.5hP6oyShhR-UWUi6KF-lA0cWmE_BJjvIFAwkYCGEZNo
    name: Lucas Morais Rodrigues
    username: 1Lucas1apk
    to: https://github.com/1Lucas1apk
    target: _blank
---

<branch version="1.0.x">

::card{icon="lucide:globe"}
#title
Classe REST

#description
A classe responsável por gerenciar requisições HTTP para o servidor Lavalink. É instanciada através de uma instância `Node`.
<br>
```js
new REST(node: Node)
```
::

::alert{type="info" icon="lucide:info"}
A API REST é usada internamente pelo Moonlink.js. A maioria dos usuários não precisará interagir diretamente com ela, pois as classes Manager e Player fornecem abstrações de nível superior.
::

## Visão Geral

::card{icon="lucide:box"}
#title
Propriedades

#description
Propriedades principais da classe REST.
<br>
<h5>Propriedades Disponíveis</h5>

#content
| Propriedade | Tipo | Descrição |
| -------- | ---- | ----------- |
| `node` | `Node` | A instância Node associada. |
| `url` | `string` | URL base para requisições ao servidor Lavalink. |
| `defaultHeaders` | `Record<string, string>` | Cabeçalhos padrão usados para todas as requisições. |
::

::card{icon="lucide:settings"}
#title
Configuração

#description
A classe REST é configurada através da instância `Node` à qual está associada. Ela herda detalhes de conexão e autenticação do Node.
<br>

::alert{type="info" icon="lucide:info"}
Você não configura diretamente a classe REST com host, porta ou senha. Estes são derivados do objeto `Node` passado para seu construtor.
::
::

## Métodos

#### loadTracks
::field{name="loadTracks" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:music'
  ---
  #title
  Carregar Faixas

  #description
  Carrega faixas a partir de um identificador. Suporta URLs diretas e prefixos especiais para fontes TTS.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="source" type="string" required}
    A fonte de pesquisa (youtube, soundcloud, flowerytts, tts, etc.)
    ::
    ::field{name="query" type="string" required}
    A consulta de pesquisa ou URL direta.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<IRESTLoadTracks>`**

```js
// Carrega uma faixa do YouTube
const result = await rest.loadTracks('youtube', 'Never Gonna Give You Up');

// Carrega uma playlist
const result = await rest.loadTracks('youtube', 'https://youtube.com/playlist?list=...');

// Carrega uma faixa TTS
const ttsResult = await rest.loadTracks('flowerytts', 'Olá, mundo!');
```
  ::
::
::

#### update
::field{name="update" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:refresh-cw'
  ---
  #title
  Atualizar Player

  #description
  Atualiza o estado de um player no servidor Lavalink.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="data" type="IRESTOptions" required}
    Um objeto contendo `guildId` e `data` para a atualização do player.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<unknown>`**

```js
await rest.update({
  guildId: '123456789',
  data: {
    track: 'base64EncodedTrack',
    volume: 100
  }
});
```
  ::
::
::

#### destroy
::field{name="destroy" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:trash'
  ---
  #title
  Destruir Player

  #description
  Remove um player do servidor Lavalink.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="guildId" type="string" required}
    ID do servidor Discord
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<unknown>`**

```js
await rest.destroy('123456789');
```
  ::
::
::

#### getInfo
::field{name="getInfo" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:info'
  ---
  #title
  Obter Informações

  #description
  Obtém informações sobre o servidor Lavalink.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<unknown>`**

```js
const info = await rest.getInfo();
```
  ::
::
::

#### getStats
::field{name="getStats" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:bar-chart'
  ---
  #title
  Obter Estatísticas

  #description
  Obtém estatísticas do servidor Lavalink.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<unknown>`**

```js
const stats = await rest.getStats();
```
  ::
::
::

#### getVersion
::field{name="getVersion" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:tag'
  ---
  #title
  Obter Versão

  #description
  Obtém a versão do servidor Lavalink.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<unknown>`**

```js
const version = await rest.getVersion();
```
  ::
::
::

#### getLyrics
::field{name="getLyrics" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:file-text'
  ---
  #title
  Obter Letras

  #description
  Obtém as letras de uma faixa.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="data" type="Object" required}
    Dados da faixa
    ::
    ::field{name="data.encoded" type="string" required}
    Faixa codificada em Base64
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<IRESTGetLyrics>`**

```js
const lyrics = await rest.getLyrics({ encoded: 'base64EncodedTrack' });
```
  ::
::
::

#### updateSession
::field{name="updateSession" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:refresh'
  ---
  #title
  Atualizar Sessão

  #description
  Atualiza uma sessão no servidor Lavalink.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="sessionId" type="string" required}
    ID da sessão
    ::
    ::field{name="data" type="any" required}
    Dados da sessão
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<any>`**

```js
await rest.updateSession('session-123', { timeout: 60000 });
```
  ::
::
::

#### decodeTrack
::field{name="decodeTrack" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:file-code'
  ---
  #title
  Decodificar Faixa

  #description
  Decodifica uma faixa codificada em base64.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="encodedTrack" type="string" required}
    Faixa codificada em Base64
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<any>`**

```js
const trackInfo = await rest.decodeTrack('base64EncodedTrack');
```
  ::
::
::

#### decodeTracks
::field{name="decodeTracks" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:files'
  ---
  #title
  Decodificar Múltiplas Faixas

  #description
  Decodifica múltiplas faixas codificadas em base64.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="encodedTracks" type="string[]" required}
    Array de faixas codificadas em base64
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<any>`**

```js
const tracksInfo = await rest.decodeTracks(['base64Track1', 'base64Track2']);
```
  ::
::
::

#### getPlayers
::field{name="getPlayers" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:list'
  ---
  #title
  Obter Players

  #description
  Obtém todos os players em uma sessão.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="sessionId" type="string" required}
    ID da sessão
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<IRESTGetPlayers>`**

```js
const players = await rest.getPlayers('session-123');
```
  ::
::
::

#### getPlayer
::field{name="getPlayer" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:music'
  ---
  #title
  Obter Player

  #description
  Obtém informações sobre um player específico.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="sessionId" type="string" required}
    ID da sessão
    ::
    ::field{name="guildId" type="string" required}
    ID do servidor Discord
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<any>`**

```js
const player = await rest.getPlayer('session-123', '123456789');
```
  ::
::
::

#### getRoutePlannerStatus
::field{name="getRoutePlannerStatus" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:route'
  ---
  #title
  Obter Status do Planejador de Rotas

  #description
  Recupera o status do Planejador de Rotas do Lavalink, que gerencia endereços IP para conexões de saída.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<any>`** — Objeto de status do Planejador de Rotas.

  ```js
  const status = await rest.getRoutePlannerStatus();
  console.log(status);
  ```
  ::
::
::

#### unmarkFailedAddress
::field{name="unmarkFailedAddress" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:map-pin-off'
  ---
  #title
  Desmarcar Endereço Falho

  #description
  Desmarca um endereço IP específico como falho no Planejador de Rotas, permitindo que ele seja usado novamente.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="address" type="string" required}
    O endereço IP a ser desmarcado.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<any>`**

  ```js
  await rest.unmarkFailedAddress('192.168.1.1');
  ```
  ::
::
::

#### unmarkAllFailedAddresses
::field{name="unmarkAllFailedAddresses" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:map-pin-off'
  ---
  #title
  Desmarcar Todos os Endereços Falhos

  #description
  Desmarca todos os endereços IP atualmente falhos no Planejador de Rotas.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<any>`**

  ```js
  await rest.unmarkAllFailedAddresses();
  ```
  ::
::
::

#### patch
::field{name="patch" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:git-commit'
  ---
  #title
  Requisição Patch

  #description
  Envia uma requisição PATCH genérica para um caminho especificado no servidor Lavalink.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="path" type="string" required}
    O caminho da API para enviar a requisição PATCH (ex: `sessions/seu-session-id`).
    ::
    ::field{name="data" type="any" required}
    O payload de dados para a requisição PATCH.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<unknown>`**

  ```js
  await rest.patch('sessions/my-session-id', { resuming: true });
  ```
  ::
::
::

#### get
::field{name="get" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:download'
  ---
  #title
  Requisição GET Genérica

  #description
  Envia uma requisição GET genérica para um caminho especificado no servidor Lavalink.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="path" type="string" required}
    O caminho da API para enviar a requisição GET.
    ::
  ::
  ::

  ::card
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<unknown>`**

  ```js
  const data = await rest.get('sessions/my-session-id/players');
  ```
  ::
::
::

#### put
::field{name="put" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:upload'
  ---
  #title
  Requisição PUT Genérica

  #description
  Envia uma requisição PUT genérica para um caminho especificado no servidor Lavalink.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="path" type="string" required}
    O caminho da API para enviar a requisição PUT.
    ::
    ::field{name="data" type="any" required}
    O payload de dados para a requisição PUT.
    ::
  ::
  ::

  ::card
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<unknown>`**

  ```js
  await rest.put('sessions/my-session-id/player', { volume: 100 });
  ```
  ::
::
::

#### post
::field{name="post" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:send'
  ---
  #title
  Requisição POST Genérica

  #description
  Envia uma requisição POST genérica para um caminho especificado no servidor Lavalink.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="path" type="string" required}
    O caminho da API para enviar a requisição POST.
    ::
    ::field{name="data" type="any"}
    Opcional: O payload de dados para a requisição POST.
    ::
  ::
  ::

  ::card
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<unknown>`**

  ```js
  await rest.post('sessions/my-session-id/player/play', { track: 'encodedTrack' });
  ```
  ::
::
::

#### delete
::field{name="delete" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:trash'
  ---
  #title
  Requisição DELETE Genérica

  #description
  Envia uma requisição DELETE genérica para um caminho especificado no servidor Lavalink.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="path" type="string" required}
    O caminho da API para enviar a requisição DELETE.
    ::
  ::
  ::

  ::card
  #title
  Retornos e Exemplo

  #description
  **Retornos**
  • **`Promise<unknown>`**

  ```js
  await rest.delete('sessions/my-session-id/player');
  ```
  ::
::
::

## Exemplo de Uso

::card{icon="lucide:code"}
#title
Uso Básico

#description
Exemplo de como usar a classe REST.
<br>
<h5>Exemplo de Código</h5>

#content
```js
// Crie uma instância REST através de um node
const rest = node.rest;

// Carregue uma faixa
const result = await rest.loadTracks('youtube', 'Never Gonna Give You Up');

// Atualize um player
await rest.update({
  guildId: '123456789',
  data: {
    track: result.tracks[0].track,
    volume: 100
  }
});

// Obtenha informações do servidor
const info = await rest.getInfo();
console.log('Versão do Lavalink:', info.version);

// Decodifique uma faixa
const trackInfo = await rest.decodeTrack(result.tracks[0].track);
console.log('Título da faixa:', trackInfo.title);
```

#footer
Este exemplo demonstra operações básicas usando a API REST.
::

::button-link{right-icon="lucide:arrow-right" to="/api/websocket"}
  Continuar para WebSocket
:: 