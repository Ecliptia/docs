---
title: Track
description: "API reference for the Track class in Moonlink.js"
icon: 'lucide:music'
authors:
  - avatar: https://www.npmjs.com/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9hNmE5NDVhYjJiNzk1MjcyNzVjN2IwMWEyNWM1YzQ2NT9zaXplPTQ5NiZkZWZhdWx0PXJldHJvIn0.5hP6oyShhR-UWUi6KF-lA0cWmE_BJjvIFAwkYCGEZNo
    name: Lucas Morais Rodrigues
    username: 1Lucas1apk
    to: https://github.com/1Lucas1apk
    target: _blank
---

The `Track` class represents an audio track that can be played by a player. It contains metadata about the track, such as title, artist, duration, and URL.

::alert{type="info" icon="lucide:info"}
Tracks are the fundamental units of playback in Moonlink.js. Each track contains all the information needed to play a piece of audio, along with metadata for display purposes.
::

## Getting a Track

::card
---
icon: lucide:search
---

#title
Track Retrieval

#description
Track instances are typically obtained through the Manager's search method

#content
```js
const result = await manager.search({
  query: 'Never Gonna Give You Up',
  source: 'youtube'
});

if (result.loadType === 'track') {
  // Get the first track
  const track = result.tracks[0];
  
  // Use the track
  player.queue.add(track);
  player.play();
}
```

#footer
Tracks can be searched from various sources like YouTube, SoundCloud, etc.
::

## Properties

| Property | Type | Description | Default |
|----------|------|-------------|---------|
| `encoded` | `string` | The encoded track identifier used by Lavalink | Required |
| `url` | `string` | The URL of the track | `undefined` |
| `author` | `string` | The author/artist of the track | Required |
| `duration` | `number` | The duration of the track in milliseconds | Required |
| `title` | `string` | The title of the track | Required |
| `position` | `number` | The current playback position | Required |
| `identifier` | `string` | The unique identifier of the track | `undefined` |
| `isSeekable` | `boolean` | Whether the track allows seeking | Required |
| `isStream` | `boolean` | Whether the track is a live stream | Required |
| `artworkUrl` | `string` | The URL of the track artwork | `undefined` |
| `isrc` | `string` | The ISRC code of the track | `undefined` |
| `time` | `number` | The current playback position of the track in milliseconds. Updated during playback. | `0` |
| `sourceName` | `string` | The source platform name (e.g., `youtube`, `soundcloud`). | `undefined` |
| `origin` | `string` | The identifier of the node where the track originated. | `undefined` |
| `requestedBy` | `Object \| string` | The requester of the track. Can be a string (e.g., user ID) or an object containing user information. | `undefined` |
| `pluginInfo` | `Record<string, any>` | Plugin-specific information | `{}` |
| `chapters` | `IChapter[]` | Array of chapters for the track (if available). | `[]` |
| `currentChapterIndex` | `number` | The index of the currently playing chapter. | `-1` |


::alert{type="success" icon="lucide:zap"}
**New Feature:** Moonlink.js now supports partial track loading via the `partialTrack` option in Manager, improving performance by loading only required track properties initially.
::

## Methods

### setRequester
::field{name="setRequester" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:user'
  ---
  #title
  Set Requester

  #description
  Sets the requester of the track. This is useful for tracking who requested each track.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="requester" type="Object | string" required}
    The requester of the track (typically a Discord user object)
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`void`**

  ```js
  // Set the requester as a Discord user
  track.setRequester(message.author);

  // Or with slash command interactions
  track.setRequester(interaction.user);
  ```
  ::
::
::

### setPosition
::field{name="setPosition" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:timer'
  ---
  #title
  Set Position

  #description
  Sets the current playback position of the track.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="position" type="number" required}
    The new playback position in milliseconds.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`void`**

  ```js
  track.setPosition(30000); // Set position to 30 seconds
  ```
  ::
::
::

### setTime
::field{name="setTime" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:clock'
  ---
  #title
  Set Time

  #description
  Sets the current time of the track. This is typically updated during playback.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="time" type="number" required}
    The new time in milliseconds.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`void`**

  ```js
  track.setTime(15000); // Set time to 15 seconds
  ```
  ::
::
::

### setChapters
::field{name="setChapters" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:book-open'
  ---
  #title
  Set Chapters

  #description
  Sets the chapters for the track.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="chapters" type="IChapter[]" required}
    An array of chapter objects.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`void`**

  ```js
  track.setChapters([
    { name: 'Intro', start: 0, end: 10000, duration: '0:10' },
    { name: 'Verse 1', start: 10000, end: 30000, duration: '0:20' }
  ]);
  ```
  ::
::
::

### getThumbnailUrl
::field{name="getThumbnailUrl" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:image'
  ---
  #title
  Get Thumbnail URL

  #description
  Retrieves the thumbnail URL for the track, with support for different YouTube qualities.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="quality" type="string" defaultValue="default"}
    The desired thumbnail quality (e.g., `default`, `hqdefault`, `mqdefault`, `sddefault`, `maxresdefault`).
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`string | undefined`** — The URL of the thumbnail, or `undefined` if not available.

  ```js
  const defaultThumb = track.getThumbnailUrl();
  const maxResThumb = track.getThumbnailUrl('maxresdefault');
  ```
  ::
::
::

### resolve
::field{name="resolve" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:check-circle'
  ---
  #title
  Resolve Track

  #description
  Resolves the track data if it's an internal Moonlink.js track (e.g., from a plugin).
  This method is primarily used internally to ensure full track data is available.
  <br>
  <h5>Parameters</h5>

  ::field-group
    None
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`Promise<boolean>`** - `true` if the track was resolved successfully, `false` otherwise.

  ```js
  // This method is usually called internally by Moonlink.js
  // You typically won't need to call this directly.
  const resolved = await track.resolve();
  if (resolved) {
    console.log('Track data resolved.');
  }
  ```
  ::
::
::

### resolveData
::field{name="resolveData" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:refresh-cw'
  ---
  #title
  Resolve Data

  #description
  Resolves all track data for a partial track. This method decodes the track and loads all properties, even if they weren't initially loaded due to partialTrack settings.
  <br>
  <h5>Parameters</h5>

  ::field-group
    None
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`Track`** - The current track instance with all properties resolved

  ```js
  // If using partialTrack and needing full track data
  const track = searchResult.tracks[0];
  
  // Check if it's a partial track
  if (track.isPartialTrack()) {
    // Resolve all track data
    track.resolveData();
  }
  
  console.log(`Full track data: ${track.duration}, ${track.identifier}, etc.`);
  ```
  ::
::
::

### isPartialTrack
::field{name="isPartialTrack" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:check-circle'
  ---
  #title
  Is Partial Track

  #description
  Checks if the track has only partially loaded properties.
  <br>
  <h5>Parameters</h5>

  ::field-group
    None
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** - Whether the track is partial

  ```js
  const track = searchResult.tracks[0];
  
  if (track.isPartialTrack()) {
    console.log("This track has partial data and may need resolving");
  } else {
    console.log("This track has all data loaded");
  }
  ```
  ::
::
::

### raw
::field{name="raw" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:code'
  ---
  #title
  Raw

  #description
  Returns the raw track data as an ITrack object.
  <br>
  <h5>Parameters</h5>

  ::field-group
    None
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`ITrack`** - The raw track data

  ```js
  const track = searchResult.tracks[0];
  const rawData = track.raw();
  
  console.log(rawData);
  // Could be used to serialize track data
  ```
  ::
::
::

### unresolvedTrack
::field{name="unresolvedTrack" type="static method"}
::stack
  ::card
  ---
  icon: 'lucide:search'
  ---
  #title
  Unresolved Track

  #description
  Creates an unresolved track from basic metadata and attempts to find a matching real track.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="options" type="object" required}
    Object containing the track options
    ::
    ::field{name="options.title" type="string" required}
    The track title to search for
    ::
    ::field{name="options.author" type="string" required}
    The track author/artist
    ::
    ::field{name="options.duration" type="number"}
    Optional track duration in milliseconds, used to find closest match
    ::
    ::field{name="options.source" type="string"}
    Optional source platform to search on (defaults to manager's defaultPlatformSearch)
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`Promise<Track>`** - A promise that resolves to the found track, or a fallback track if none found

  ```js
  // Create an unresolved track from basic metadata
  const track = await Track.unresolvedTrack({
    title: "Never Gonna Give You Up",
    author: "Rick Astley",
    duration: 213000  // optional, helps find closest match
  });
  
  // Play the resolved track
  player.queue.add(track);
  player.play();
  ```
  ::
::
::

## Partial Track Loading

::card
---
icon: lucide:settings
---

#title
Partial Track Configuration

#description
Configure the Manager to load only specific track properties for improved performance

#content
```js
const { Manager } = require('moonlink.js');

// Create the Manager with partialTrack option
const manager = new Manager({
  nodes: [
    // ... node config
  ],
  options: {
    // Only load these properties initially
    partialTrack: ["url", "duration", "artworkUrl"]
  },
  sendPayload: // ... payload function
});

// ... rest of your code

// When you need all track data
const track = searchResult.tracks[0];
if (track.isPartialTrack()) {
  // This will decode the track and load all properties
  track.resolveData();
}
```

#footer
Partial track loading can significantly improve performance when handling many tracks
::

## Example Usage

::card
---
icon: lucide:code
---

#title
Complete Example

#description
A complete example of working with the Track class

#content
```js
const { Manager } = require('moonlink.js');

// Create the Manager
const manager = new Manager({
  // ... options
});

// Initialize the Manager
manager.init('client-id');

// Create a player
const player = manager.createPlayer({
  guildId: '123456789012345678',
  voiceChannelId: '123456789012345678',
  textChannelId: '123456789012345678'
});

// Search and play a track
async function playTrack(query, requester) {
  const result = await manager.search({
    query,
    source: 'youtube'
  });

  if (result.loadType === 'track') {
    const track = result.tracks[0];
    
    // Set the requester
    track.setRequester(requester);
    
    // Add to the queue
    player.queue.add(track);
    
    // Start playback if not already playing
    if (!player.playing) {
      player.play();
    }
    
    return {
      title: track.title,
      author: track.author,
      duration: track.duration,
      url: track.url,
      artworkUrl: track.artworkUrl
    };
  }
  
  return null;
}

// Example usage with Discord.js
client.on('messageCreate', async (message) => {
  if (message.content.startsWith('!play')) {
    const query = message.content.slice(6).trim();
    
    const trackInfo = await playTrack(query, message.author);
    
    if (trackInfo) {
      message.channel.send(`Added to queue: **${trackInfo.title}** by ${trackInfo.author}`);
    } else {
      message.channel.send('No track found.');
    }
  }
});
```

#footer
Adapt this example to your specific needs
::

::button-link{right-icon="lucide:arrow-right" to="/api/events"}
  Continue to Events
:: 