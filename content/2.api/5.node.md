---
title: Node
description: Represents a direct connection to a single Lavalink server. It handles the WebSocket connection, session resuming, and payload transmission.
icon: lucide:server
---

The `Node` class represents a single Lavalink server instance. It manages the persistent WebSocket connection, handles incoming events (like track starts/ends), and maintains the synchronization state with the server.

## Properties

::api-properties{name="Node Properties" description="Core state and connection details for this Lavalink node."}
::api-section{title="References"}
::
::api-schema{name="manager" type="Manager" typeLink="/api/manager"}
The main Manager instance that owns this node.
::

::api-section{title="Connection Info"}
::
::api-schema{name="identifier" type="string"}
The unique identifier for this node (e.g., "Node-01").
::
::api-schema{name="host" type="string"}
The hostname or IP address.
::
::api-schema{name="port" type="number"}
The port number.
::
::api-schema{name="address" type="string"}
Returns the full address formatted as `host:port`.
::
::api-schema{name="latency" type="number"}
Current WebSocket latency in ms. `-1` if disconnected.
::

::api-section{title="State"}
::
::api-schema{name="connected" type="boolean"}
Whether the WebSocket connection is currently open.
::
::api-schema{name="stats" type="INodeStats"}
Real-time statistics (CPU, RAM, Uptime).
::
::api-schema{name="sessionId" type="string"}
The current Lavalink session ID.
::
::api-schema{name="capabilities" type="Set<string>"}
Supported features (e.g., `source:spotify`).
::
::

## Methods

### connect()
::api-card{name="connect()" method="connect" returns="Promise<void>" anchorId="connect"}
#description
Initiates the WebSocket connection to the Lavalink server.
**Note:** `NodeManager` handles this automatically, but you can call it manually if needed.

#example
```ts
await node.connect();
```
::

### reconnect()
::api-card{name="reconnect()" method="reconnect" returns="void" anchorId="reconnect"}
#description
Forces a reconnection attempt using the configured backoff strategy.

#example
```ts
node.reconnect();
```
::

### destroy()
::api-card{name="destroy()" method="destroy" returns="Promise<void>" anchorId="destroy"}
#description
Closes the WebSocket connection and marks the node as destroyed. This will not automatically move players; use `NodeManager.eject()` for that.

#example
```ts
await node.destroy();
```
::

### ping()
::api-card{name="ping()" method="ping" returns="Promise<number>" anchorId="ping"}
#description
Sends a ping frame to the WebSocket and returns the round-trip time in milliseconds.

#example
```ts
const ping = await node.ping();
console.log(`Node latency: ${ping}ms`);
```
::

### getPenalties()
::api-card{name="getPenalties()" method="getPenalties" returns="number" anchorId="getpenalties"}
#description
Calculates the current load penalty score for this node. Used by the load balancer to select the best node.
Higher score = higher load.

#example
```ts
const load = node.getPenalties();
```
::

### handleAutoPlay(player, previousTrack)
::api-card{name="handleAutoPlay(player, previousTrack)" method="handleAutoPlay" returns="Promise<boolean>" anchorId="handleautoplay"}
#description
Attempts to find and play a similar track based on the previous one. Supports YouTube Mix, Spotify, Deezer, and Apple Music recommendations depending on Node capabilities.

#default
::api-schema{name="player" type="Player" required}
The player requesting autoplay.
::
::api-schema{name="previousTrack" type="Track" required}
The track that just finished playing.
::

#example
```ts
const success = await node.handleAutoPlay(player, lastTrack);
if (success) console.log("Autoplay started!");
```
::
