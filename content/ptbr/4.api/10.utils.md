---
title: Utils
description: "Referência da API para utilitários em Moonlink.js"
icon: 'lucide:tool-case'
authors:
  - avatar: https://www.npmjs.com/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9hNmE5NDVhYjJiNzk1MjcyNzVjN2IwMWEyNWM1YzQ2NT9zaXplPTQ5NiZkZWZhdWx0PXJldHJvIn0.5hP6oyShhR-UWUi6KF-lA0cWmE_BJjvIFAwkYCGEZNo
    name: Lucas Morais Rodrigues
    username: 1Lucas1apk
    to: https://github.com/1Lucas1apk
    target: _blank
---

<branch version="1.0.x">

::card{icon="lucide:tool"}
#title
Funções e Classes Utilitárias

#description
Utilitários principais fornecidos pelo Moonlink.js para estender e personalizar funcionalidades.
::

::alert{type="info" icon="lucide:info"}
Todos os utilitários estão disponíveis através do módulo principal e podem ser importados diretamente.
::

## Funções Utilitárias

#### validateProperty
::field{name="validateProperty" type="function"}
::stack
  ::card
  ---
  icon: 'lucide:check-circle'
  ---
  #title
  Validar Propriedade

  #description
  Valida uma propriedade com base em uma função de validação.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="property" type="any" required}
    A propriedade a ser validada
    ::
    ::field{name="validator" type="Function" required}
    Função que retorna um booleano indicando se a propriedade é válida
    ::
    ::field{name="errorMessage" type="string" required}
    Mensagem de erro a ser lançada se a propriedade for inválida
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`void`** - Lança um erro se a propriedade for inválida

```js
// Validar número da porta
validateProperty(
  options.port,
  value => value === undefined || (value >= 0 && value <= 65535),
  "Valor de porta inválido. Deve ser entre 0 e 65535."
);

// Validar string
validateProperty(
  options.identifier,
  value => value === undefined || typeof value === "string",
  "Identificador inválido. Deve ser uma string."
);
```
  ::
::
::

#### delay
::field{name="delay" type="function"}
::stack
  ::card
  ---
  icon: 'lucide:clock'
  ---
  #title
  Atraso

  #description
  Cria uma promessa que resolve após os milissegundos especificados.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="ms" type="number" required}
    Milissegundos para atrasar
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`Promise<void>`**

```js
// Esperar por 1 segundo
await delay(1000);

// Usar em função assíncrona
async function reconnect() {
  console.log('Reconectando em 5 segundos...');
  await delay(5000);
  console.log('Reconectando agora');
}
```
  ::
::
::

#### decodeTrack
::field{name="decodeTrack" type="function"}
::stack
  ::card
  ---
  icon: 'lucide:file-code'
  ---
  #title
  Decodificar Faixa

  #description
  Decodifica uma string de faixa codificada em base64.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="encodedTrack" type="string" required}
    String de faixa codificada em base64
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`ITrack`** - Objeto de faixa decodificado

```js
const track = decodeTrack('base64EncodedTrackString');
console.log(track.info.title);
console.log(track.info.author);
console.log(track.info.length);
```
  ::
::
::

#### encodeTrack
::field{name="encodeTrack" type="function"}
::stack
  ::card
  ---
  icon: 'lucide:file-code'
  ---
  #title
  Codificar Faixa

  #description
  Codifica informações da faixa em uma string base64.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="track" type="ITrackInfo" required}
    Objeto de faixa a ser codificado
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`string`** - String de faixa codificada em base64

```js
const encodedTrack = encodeTrack({
  title: 'Nome da Música',
  author: 'Artista',
  length: 180000,
  identifier: 'trackId',
  isStream: false,
  uri: 'https://example.com/track',
  sourceName: 'youtube'
});
```
  ::
::
::

#### generateUUID
::field{name="generateUUID" type="function"}
::stack
  ::card
  ---
  icon: 'lucide:key'
  ---
  #title
  Gerar UUID

  #description
  Gera um identificador único (UUID) com base no host e na porta usando hash SHA256.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="host" type="string" required}
    Nome do host ou endereço IP
    ::
    ::field{name="port" type="number" required}
    Número da porta
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`string`** - UUID com hash SHA256

```js
const uuid = generateUUID('localhost', 2333);
console.log(uuid); // ex: 'a6a945ab2b79527275c7b01a25c5c465'
```
  ::
::
::

#### compareVersions
::field{name="compareVersions" type="function"}
::stack
  ::card
  ---
  icon: 'lucide:git-compare'
  ---
  #title
  Comparar Versões

  #description
  Compara duas strings de versão (ex: "1.0.0", "1.2.3") e retorna um número indicando sua ordem relativa.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="current" type="string" required}
    A string da versão atual.
    ::
    ::field{name="required" type="string" required}
    A string da versão necessária.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`number`** - Um número negativo se `current` for menor que `required`, um número positivo se `current` for maior que `required`, ou `0` se forem iguais.

```js
const result1 = compareVersions("1.0.0", "1.0.0"); // 0
const result2 = compareVersions("1.0.0", "1.1.0"); // -1 (atual é menor que a necessária)
const result3 = compareVersions("1.2.0", "1.1.0"); // 1 (atual é maior que a necessária)
```
  ::
::
::

#### stringifyWithReplacer
::field{name="stringifyWithReplacer" type="function"}
::stack
  ::card
  ---
  icon: 'lucide:code-2'
  ---
  #title
  Stringify com Substituidor

  #description
  Converte um valor JavaScript em uma string JSON, tratando referências circulares substituindo-as por `"[Circular Refs]"`.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="obj" type="any" required}
    O valor a ser convertido em uma string JSON.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`string`** - Uma representação em string JSON do valor.

```js
const obj = {};
obj.a = obj;
const jsonString = stringifyWithReplacer(obj);
console.log(jsonString); // {"a":"[Circular Refs]"}
```
  ::
::
::

#### Log
::field{name="Log" type="function"}
::stack
  ::card
  ---
  icon: 'lucide:file-text'
  ---
  #title
  Log

  #description
  Registra uma mensagem em um arquivo especificado.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="message" type="string" required}
    Mensagem a ser registrada
    ::
    ::field{name="LogPath" type="string" required}
    Caminho para o arquivo de log
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`void`**

```js
Log('Player criado', './logs/moonlink.log');
```
  ::
::
::

#### makeRequest
::field{name="makeRequest" type="function"}
::stack
  ::card
  ---
  icon: 'lucide:send'
  ---
  #title
  Fazer Requisição

  #description
  Faz uma requisição HTTP e retorna a resposta JSON. Agora suporta novas tentativas e tempos limite.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="url" type="string" required}
    URL da requisição
    ::
    ::field{name="options" type="http.RequestOptions & { body?: any }" required}
    Opções da requisição, incluindo corpo opcional.
    ::
    ::field{name="timeout" type="number"}
    Opcional: Tempo limite da requisição em milissegundos. Padrão 10000.
    ::
    ::field{name="retries" type="number"}
    Opcional: Número de tentativas de repetição. Padrão 3.
    ::
    ::field{name="retryDelay" type="number"}
    Opcional: Atraso entre as tentativas em milissegundos. Padrão 1000.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`Promise<T | undefined>`** - Resposta de tipo genérico ou `undefined` se a requisição falhar após as tentativas.

```js
// Requisição GET com tempo limite e tentativas personalizadas
const data = await makeRequest('https://api.example.com/data', {
  method: 'GET',
  headers: { 'Content-Type': 'application/json' }
}, 5000, 5);

// Requisição POST
const response = await makeRequest('https://api.example.com/data', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ key: 'value' })
});
```
  ::
::
::

#### isSourceBlacklisted
::field{name="isSourceBlacklisted" type="function"}
::stack
  ::card
  ---
  icon: 'lucide:ban'
  ---
  #title
  Fonte na Lista Negra

  #description
  Verifica se um determinado nome de fonte está na lista negra nas opções do Manager.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="manager" type="Manager" required}
    A instância do Manager.
    ::
    ::field{name="sourceName" type="string" required}
    O nome da fonte a ser verificada.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`boolean`** - `true` se a fonte estiver na lista negra, `false` caso contrário.

```js
const isBlacklisted = isSourceBlacklisted(manager, 'spotify');
if (isBlacklisted) {
  console.log('Spotify está na lista negra.');
}
```
  ::
::
::

## Classes Utilitárias

#### Structure
::field{name="Structure" type="class"}
::stack
  ::card
  ---
  icon: 'lucide:box'
  ---
  #title
  Classe Structure

  #description
  Classe abstrata para estender e personalizar estruturas do Moonlink.js. Fornece métodos estáticos para gerenciar a instância do Manager e estender classes principais.
  <br>
  <h5>Métodos Estáticos</h5>

  ::field-group
    ::field{name="setManager" type="method"}
    Define a instância global do Manager para uso interno.
    ::
    ::field{name="getManager" type="method"}
    Recupera a instância global do Manager.
    ::
    ::field{name="extend" type="method"}
    Estende uma estrutura principal do Moonlink.js (ex: `Player`, `Node`) com funcionalidade personalizada.
    ::
    ::field{name="get" type="method"}
    Recupera uma estrutura estendida ou padrão pelo nome.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Exemplo de Uso

  #description
```js
// Estender a classe Player
Structure.extend('Player', Player => {
  return class CustomPlayer extends Player {
    constructor(manager, options) {
      super(manager, options);
      this.customProperty = 'valor personalizado';
    }
    
    customMethod() {
      return this.customProperty;
    }
  };
});

// Usar player personalizado
const player = manager.players.create({
  guildId: '123456789',
  voiceChannelId: '123456789',
  textChannelId: '123456789'
});

console.log(player.customProperty);
player.customMethod();
```
  ::
::
::

#### Plugin
::field{name="Plugin" type="class"}
::stack
  ::card
  ---
  icon: 'lucide:puzzle'
  ---
  #title
  Classe Plugin

  #description
  Classe base para criar plugins do Moonlink.js. Plugins podem estender funcionalidades principais e se integrar com o Manager.
  <br>
  <h5>Propriedades</h5>

  | Propriedade | Tipo | Descrição |
  | -------- | ---- | ----------- |
  | `name` | `string` | O nome do plugin. |
  | `version` | `string` | A versão do plugin. |
  | `description` | `string` | Uma breve descrição do propósito do plugin. |
  | `author` | `string | Record<string, any>` | O(s) autor(es) do plugin. Pode ser uma string ou um objeto. |
  | `minVersion` | `string` | A versão mínima do Moonlink.js exigida por este plugin. |

  <h5>Métodos</h5>

  | Método | Descrição |
  | ------ | ----------- |
  | `load(manager)` | Chamado quando o plugin é carregado pelo Manager. |
  | `unload(manager)` | Chamado quando o plugin é descarregado do Manager. |
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Exemplo de Uso

  #description
```js
class CustomPlugin extends Plugin {
  constructor() {
    super();
    this.name = 'CustomPlugin';
    this.version = '1.0.0';
    this.description = 'Um plugin personalizado';
    this.author = 'Seu Nome';
    this.minVersion = '1.0.0'; // Especificar a versão mínima do Moonlink.js
  }
  
  load(manager) {
    console.log(`${this.name} carregado`);
    
    // Adicionar funcionalidade personalizada
    Structure.extend('Player', Player => {
      return class CustomPlayer extends Player {
        constructor(manager, options) {
          super(manager, options);
          this.pluginProperty = 'valor do plugin';
        }
      };
    });
  }
  
  unload(manager) {
    console.log(`${this.name} descarregado`);
  }
}

// Registrar plugin
manager.plugins.register(new CustomPlugin());
```
  ::
::
::

## Utilitários

::button-link{right-icon="lucide:arrow-right" to="/api/search-result"}
  Continuar para SearchResult
::