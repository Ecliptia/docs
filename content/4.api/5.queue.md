---
title: Queue
description: "API reference for the Queue class in Moonlink.js"
icon: 'lucide:list-ordered'
authors:
  - avatar: https://www.npmjs.com/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9hNmE5NDVhYjJiNzk1MjcyNzVjN2IwMWEyNWM1YzQ2NT9zaXplPTQ5NiZkZWZhdWx0PXJldHJvIn0.5hP6oyShhR-UWUi6KF-lA0cWmE_BJjvIFAwkYCGEZNo
    name: Lucas Morais Rodrigues
    username: 1Lucas1apk
    to: https://github.com/1Lucas1apk
    target: _blank
---

The `Queue` class manages a player's track queue, allowing you to add, remove, and manipulate tracks. The queue is persistent and synchronized with the internal database.

::alert{type="info" icon="lucide:info"}
Queue is an essential component for managing multiple tracks in a music bot. It provides methods for adding, removing, and manipulating track order, with automatic persistence.
::

## Properties

| Property | Type | Description | Default |
|----------|------|-------------|---------|
| `database` | `Database` | Database instance for persistence | Required |
| `guildId` | `string` | Guild ID associated with the queue | Required |
| `player` | `Player` | The player instance this queue belongs to | Required |
| `tracks` | `Track[]` | Array containing all tracks in queue | `[]` |
| `size` | `number` | Number of tracks in queue | `0` |
| `duration` | `number` | Total duration of all tracks in the queue (milliseconds) | `0` |
| `isEmpty` | `boolean` | Whether the queue is empty | `true` |
| `first` | `Track` | The first track in the queue | `null` |
| `last` | `Track` | The last track in the queue | `null` |
| `all` | `Track[]` | All tracks currently in the queue | `[]` |
| `position` | `number` | The current position of the playing track in the queue (0-based index) | `0` |
| `previous` | `Track[]` | All tracks before the current playing track in the queue | `[]` |

## Methods

#### add
::field{name="add" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:plus'
  ---
  #title
  Add Track

  #description
  Adds a track or an array of tracks to the queue and persists it in the database. Filters out blacklisted tracks. Emits `queueAdd` event.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="track" type="Track | Track[]" required}
    The track or array of tracks to add
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — Whether the track was added successfully

  ```js
  queue.add(track);
  ```
  ::
::
::

#### get
::field{name="get" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:search'
  ---
  #title
  Get Track

  #description
  Gets a track at a specific position in the queue.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="position" type="number" required}
    Queue position (0-based index)
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`Track`** — The track at the specified position

  ```js
  const track = queue.get(0); // Get first track
  ```
  ::
::
::

#### has
::field{name="has" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:check'
  ---
  #title
  Has Track

  #description
  Checks if a specific track is in the queue.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="track" type="Track" required}
    The track to check
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — Whether the track exists in queue

  ```js
  if (queue.has(track)) {
    console.log('Track is in queue');
  }
  ```
  ::
::
::

#### remove
::field{name="remove" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:minus'
  ---
  #title
  Remove Track

  #description
  Removes a track at a specific position and updates the database. Emits `queueRemove` event.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="position" type="number" required}
    Queue position (0-based index)
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — Whether the track was removed successfully

  ```js
  queue.remove(0); // Remove first track
  ```
  ::
::
::

#### shift
::field{name="shift" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:arrow-left'
  ---
  #title
  Shift Track

  #description
  Removes and returns the first track in the queue. Emits `queueRemove` event.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`Track`** — The first track in queue

  ```js
  const nextTrack = queue.shift();
  ```
  ::
::
::

#### unshift
::field{name="unshift" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:arrow-right'
  ---
  #title
  Unshift Track

  #description
  Adds a track to the beginning of the queue. Emits `queueAdd` event.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="track" type="Track" required}
    The track to add
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — Whether the track was added successfully

  ```js
  queue.unshift(track);
  ```
  ::
::
::

#### pop
::field{name="pop" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:arrow-up'
  ---
  #title
  Pop Track

  #description
  Removes and returns the last track in the queue. Emits `queueRemove` event.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`Track`** — The last track in queue

  ```js
  const lastTrack = queue.pop();
  ```
  ::
::
::

#### clear
::field{name="clear" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:trash'
  ---
  #title
  Clear Queue

  #description
  Clears all tracks from the queue and removes from database. Emits `queueRemove` event.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — Whether the queue was cleared successfully

  ```js
  queue.clear();
  ```
  ::
::
::

#### shuffle
::field{name="shuffle" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:shuffle'
  ---
  #title
  Shuffle Queue

  #description
  Randomly shuffles tracks in the queue using Math.random().
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — Whether the queue was shuffled successfully

  ```js
  queue.shuffle();
  ```
  ::
::
::

#### removeDuplicates
::field{name="removeDuplicates" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:copy-slash'
  ---
  #title
  Remove Duplicates

  #description
  Removes duplicate tracks from the queue based on their encoded string. Returns `true` if duplicates were removed, `false` otherwise.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — Whether duplicates were removed.

  ```js
  const removed = queue.removeDuplicates();
  if (removed) {
    console.log('Duplicates removed from queue.');
  }
  ```
  ::
::
::

#### removeBlacklistedTracks
::field{name="removeBlacklistedTracks" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:ban'
  ---
  #title
  Remove Blacklisted Tracks

  #description
  Removes tracks from the queue whose source is in the manager's `blacklistedSources` list. Emits `trackBlacklisted` event for each removed track.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — `true` if any blacklisted tracks were removed, `false` otherwise.

  ```js
  const removed = queue.removeBlacklistedTracks();
  if (removed) {
    console.log('Blacklisted tracks removed from queue.');
  }
  ```
  ::
::
::

#### sortByTitle
::field{name="sortByTitle" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:sort-asc'
  ---
  #title
  Sort by Title

  #description
  Sorts the queue alphabetically by track title.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — `true` if the queue was sorted, `false` if there were fewer than 2 tracks.

  ```js
  queue.sortByTitle();
  ```
  ::
::
::

#### sortByAuthor
::field{name="sortByAuthor" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:sort-asc'
  ---
  #title
  Sort by Author

  #description
  Sorts the queue alphabetically by track author.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — `true` if the queue was sorted, `false` if there were fewer than 2 tracks.

  ```js
  queue.sortByAuthor();
  ```
  ::
::
::

#### sortByDuration
::field{name="sortByDuration" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:sort-asc'
  ---
  #title
  Sort by Duration

  #description
  Sorts the queue by track duration in ascending order.
  <br>
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — `true` if the queue was sorted, `false` if there were fewer than 2 tracks.

  ```js
  queue.sortByDuration();
  ```
  ::
::
::

#### find
::field{name="find" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:search'
  ---
  #title
  Find Track

  #description
  Finds a track in the queue by its identifier or by a partial match in its title.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="query" type="string" required}
    The identifier or a part of the title to search for.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`Track | undefined`** — The found track or `undefined` if not found.

  ```js
  const foundTrack = queue.find('my-track-id');
  if (!foundTrack) {
    const anotherTrack = queue.find('song title');
  }
  ```
  ::
::
::

#### move
::field{name="move" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:arrow-right-left'
  ---
  #title
  Move Track

  #description
  Moves a track from one position to another within the queue.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="from" type="number" required}
    The starting 0-based index of the track to move.
    ::

    ::field{name="to" type="number" required}
    The target 0-based index where the track should be moved.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — `true` if the track was moved successfully, `false` otherwise.

  ```js
  queue.move(0, 2); // Moves the first track to the third position
  ```
  ::
::
::

#### moveRange
::field{name="moveRange" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:arrows-right-left'
  ---
  #title
  Move Range

  #description
  Moves a contiguous range of tracks from one position to another within the queue. Emits `queueMoveRange` event.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="fromIndex" type="number" required}
    The starting 0-based index of the range to move.
    ::
    ::field{name="toIndex" type="number" required}
    The target 0-based index where the range should be moved.
    ::
    ::field{name="count" type="number" required}
    The number of tracks to move.
    ::
  ::
  ::

  ::card
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — `true` if the tracks were moved successfully, `false` otherwise.

  ```js
  // Move 2 tracks starting from index 0 to index 3
  queue.moveRange(0, 3, 2);
  ```
  ::
::
::

#### removeRange
::field{name="removeRange" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:minus-square'
  ---
  #title
  Remove Range

  #description
  Removes a range of tracks from the queue. Emits `queueRemoveRange` event.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="startIndex" type="number" required}
    The starting 0-based index of the range to remove.
    ::
    ::field{name="endIndex" type="number" required}
    The ending 0-based index of the range to remove (inclusive).
    ::
  ::
  ::

  ::card
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — `true` if the tracks were removed successfully, `false` otherwise.

  ```js
  // Remove tracks from index 1 to 3 (inclusive)
  queue.removeRange(1, 3);
  ```
  ::
::
::

#### duplicate
::field{name="duplicate" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:copy'
  ---
  #title
  Duplicate Track

  #description
  Duplicates a track in the queue a specified number of times. The duplicated tracks are inserted immediately after the original track. Emits `queueDuplicate` event.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="index" type="number" required}
    The 0-based index of the track to duplicate.
    ::
    ::field{name="count" type="number" defaultValue="1"}
    The number of times to duplicate the track.
    ::
  ::
  ::

  ::card
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — `true` if the track was duplicated successfully, `false` otherwise.

  ```js
  // Duplicate the first track once
  queue.duplicate(0);

  // Duplicate the second track 3 times
  queue.duplicate(1, 3);
  ```
  ::
::
::

#### jump
::field{name="jump" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:skip-forward'
  ---
  #title
  Jump to Track

  #description
  Removes all tracks before the specified index, effectively making the track at the given index the new first track in the queue.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="index" type="number" required}
    The 0-based index of the track to jump to.
    ::
  ::
  ::

  ::card
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — `true` if the jump was successful, `false` otherwise.

  ```js
  // Make the track at index 5 the new first track
  queue.jump(5);
  ```
  ::
::
::

#### slice
::field{name="slice" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:scissors'
  ---
  #title
  Slice Queue

  #description
  Returns a shallow copy of a portion of the queue into a new array object selected from `start` to `end` (end not included).
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="start" type="number" required}
    The beginning 0-based index of the specified portion of the queue.
    ::

    ::field{name="end" type="number"}
    The end 0-based index of the specified portion of the queue. `slice` extracts up to (but not including) `end`.
    ::
  ::
  ::

  ::card
  #title
  Returns & Example

  #description
  **Returns**
  • **`Track[]`** — A new array containing the extracted elements.

  ```js
  const firstTwoTracks = queue.slice(0, 2);
  ```
  ::
::
::

#### filter
::field{name="filter" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:filter'
  ---
  #title
  Filter Queue

  #description
  Creates a new array with all elements that pass the test implemented by the provided function.
  <br>
  <h5>Parameters</h5>

  ::field-group
    ::field{name="predicate" type="(track: Track) => boolean" required}
    Function to test each element of the queue. Return `true` to keep the element, `false` otherwise.
    ::
  ::
  ::

  ::card
  #title
  Returns & Example

  #description
  **Returns**
  • **`Track[]`** — A new array with the elements that pass the test.

  ```js
  const longTracks = queue.filter(track => track.duration > 300000); // Tracks longer than 5 minutes
  ```
  ::
::
::

#### reverse
::field{name="reverse" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:arrow-down-up'
  ---
  #title
  Reverse Queue

  #description
  Reverses the order of the elements in the queue in place.
  <br>
  ::

  ::card
  #title
  Returns & Example

  #description
  **Returns**
  • **`boolean`** — `true` if the queue was reversed successfully, `false` otherwise.

  ```js
  queue.reverse();
  ```
  ::
::
::
