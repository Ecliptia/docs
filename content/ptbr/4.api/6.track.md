---
title: Track
description: "Referência da API para a classe Track em Moonlink.js"
icon: 'lucide:music'
authors:
  - avatar: https://www.npmjs.com/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9hNmE5NDVhYjJiNzk1MjcyNzVjN2IwMWEyNWM1YzQ2NT9zaXplPTQ5NiZkZWZhdWx0PXJldHJvIn0.5hP6oyShhR-UWUi6KF-lA0cWmE_BJjvIFAwkYCGEZNo
    name: Lucas Morais Rodrigues
    username: 1Lucas1apk
    to: https://github.com/1Lucas1apk
    target: _blank
---

A classe `Track` representa uma faixa de áudio que pode ser reproduzida por um player. Ela contém metadados sobre a faixa, como título, artista, duração e URL.

::alert{type="info" icon="lucide:info"}
As faixas são as unidades fundamentais de reprodução no Moonlink.js. Cada faixa contém todas as informações necessárias para reproduzir um áudio, juntamente com metadados para fins de exibição.
::

## Obtendo uma Faixa

::card
---
icon: lucide:search
---

#title
Recuperação de Faixa

#description
As instâncias de faixa são normalmente obtidas através do método de pesquisa do Manager

#content
```js
const result = await manager.search({
  query: 'Never Gonna Give You Up',
  source: 'youtube'
});

if (result.loadType === 'track') {
  // Obter a primeira faixa
  const track = result.tracks[0];
  
  // Usar a faixa
  player.queue.add(track);
  player.play();
}
```

#footer
As faixas podem ser pesquisadas de várias fontes como YouTube, SoundCloud, etc.
::

## Propriedades

| Propriedade | Tipo | Descrição | Padrão |
|----------|------|-------------|---------|
| `encoded` | `string` | O identificador da faixa codificado usado pelo Lavalink | Obrigatório |
| `url` | `string` | A URL da faixa | `undefined` |
| `author` | `string` | O autor/artista da faixa | Obrigatório |
| `duration` | `number` | A duração da faixa em milissegundos | Obrigatório |
| `title` | `string` | O título da faixa | Obrigatório |
| `position` | `number` | A posição de reprodução atual | Obrigatório |
| `identifier` | `string` | O identificador único da faixa | `undefined` |
| `isSeekable` | `boolean` | Se a faixa permite busca | Obrigatório |
| `isStream` | `boolean` | Se a faixa é uma transmissão ao vivo | Obrigatório |
| `artworkUrl` | `string` | A URL da arte da faixa | `undefined` |
| `isrc` | `string` | O código ISRC da faixa | `undefined` |
| `time` | `number` | A posição de reprodução atual da faixa em milissegundos. Atualizado durante a reprodução. | `0` |
| `sourceName` | `string` | O nome da plataforma de origem (ex: `youtube`, `soundcloud`). | `undefined` |
| `origin` | `string` | O identificador do nó onde a faixa se originou. | `undefined` |
| `requestedBy` | `Object \| string` | O solicitante da faixa. Pode ser uma string (ex: ID do usuário) ou um objeto contendo informações do usuário. | `undefined` |
| `pluginInfo` | `Record<string, any>` | Informações específicas do plugin | `{}` |
| `chapters` | `IChapter[]` | Array de capítulos para a faixa (se disponível). | `[]` |
| `currentChapterIndex` | `number` | O índice do capítulo atualmente em reprodução. | `-1` |


::alert{type="success" icon="lucide:zap"}
**Novo Recurso:** Moonlink.js agora suporta carregamento parcial de faixas através da opção `partialTrack` no Manager, melhorando o desempenho ao carregar apenas as propriedades de faixa necessárias inicialmente.
::

## Métodos

### setRequester
::field{name="setRequester" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:user'
  ---
  #title
  Definir Solicitante

  #description
  Define o solicitante da faixa. Isso é útil para rastrear quem solicitou cada faixa.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="requester" type="Object | string" required}
    O solicitante da faixa (normalmente um objeto de usuário do Discord)
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`void`**

  ```js
  // Definir o solicitante como um usuário do Discord
  track.setRequester(message.author);

  // Ou com interações de comando de barra
  track.setRequester(interaction.user);
  ```
  ::
::
::

### setPosition
::field{name="setPosition" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:timer'
  ---
  #title
  Definir Posição

  #description
  Define a posição de reprodução atual da faixa.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="position" type="number" required}
    A nova posição de reprodução em milissegundos.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`void`**

  ```js
  track.setPosition(30000); // Definir posição para 30 segundos
  ```
  ::
::
::

### setTime
::field{name="setTime" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:clock'
  ---
  #title
  Definir Tempo

  #description
  Define o tempo atual da faixa. Isso é normalmente atualizado durante a reprodução.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="time" type="number" required}
    O novo tempo em milissegundos.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`void`**

  ```js
  track.setTime(15000); // Definir tempo para 15 segundos
  ```
  ::
::
::

### setChapters
::field{name="setChapters" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:book-open'
  ---
  #title
  Definir Capítulos

  #description
  Define os capítulos para a faixa.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="chapters" type="IChapter[]" required}
    Um array de objetos de capítulo.
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`void`**

  ```js
  track.setChapters([
    { name: 'Intro', start: 0, end: 10000, duration: '0:10' },
    { name: 'Verso 1', start: 10000, end: 30000, duration: '0:20' }
  ]);
  ```
  ::
::
::

### getThumbnailUrl
::field{name="getThumbnailUrl" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:image'
  ---
  #title
  Obter URL da Miniatura

  #description
  Recupera a URL da miniatura para a faixa, com suporte para diferentes qualidades do YouTube.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="quality" type="string" defaultValue="default"}
    A qualidade da miniatura desejada (ex: `default`, `hqdefault`, `mqdefault`, `sddefault`, `maxresdefault`).
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`string | undefined`** — A URL da miniatura, ou `undefined` se não estiver disponível.

  ```js
  const defaultThumb = track.getThumbnailUrl();
  const maxResThumb = track.getThumbnailUrl('maxresdefault');
  ```
  ::
::
::

### resolve
::field{name="resolve" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:check-circle'
  ---
  #title
  Resolver Faixa

  #description
  Resolve os dados da faixa se for uma faixa interna do Moonlink.js (ex: de um plugin).
  Este método é usado principalmente internamente para garantir que os dados completos da faixa estejam disponíveis.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    Nenhum
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`Promise<boolean>`** - `true` se a faixa foi resolvida com sucesso, `false` caso contrário.

  ```js
  // Este método geralmente é chamado internamente pelo Moonlink.js
  // Você normalmente não precisará chamá-lo diretamente.
  const resolved = await track.resolve();
  if (resolved) {
    console.log('Dados da faixa resolvidos.');
  }
  ```
  ::
::
::

### resolveData
::field{name="resolveData" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:refresh-cw'
  ---
  #title
  Resolver Dados

  #description
  Resolve todos os dados da faixa para uma faixa parcial. Este método decodifica a faixa e carrega todas as propriedades, mesmo que não tenham sido carregadas inicialmente devido às configurações de partialTrack.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    Nenhum
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`Track`** - A instância da faixa atual com todas as propriedades resolvidas

  ```js
  // Se estiver usando partialTrack e precisar dos dados completos da faixa
  const track = searchResult.tracks[0];
  
  // Verificar se é uma faixa parcial
  if (track.isPartialTrack()) {
    // Resolver todos os dados da faixa
    track.resolveData();
  }
  
  console.log(`Dados completos da faixa: ${track.duration}, ${track.identifier}, etc.`);
  ```
  ::
::
::

### isPartialTrack
::field{name="isPartialTrack" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:check-circle'
  ---
  #title
  É Faixa Parcial

  #description
  Verifica se a faixa tem apenas propriedades parcialmente carregadas.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    Nenhum
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`boolean`** - Se a faixa é parcial

  ```js
  const track = searchResult.tracks[0];
  
  if (track.isPartialTrack()) {
    console.log("Esta faixa tem dados parciais e pode precisar ser resolvida");
  } else {
    console.log("Esta faixa tem todos os dados carregados");
  }
  ```
  ::
::
::

### raw
::field{name="raw" type="method"}
::stack
  ::card
  ---
  icon: 'lucide:code'
  ---
  #title
  Bruto

  #description
  Retorna os dados brutos da faixa como um objeto ITrack.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    Nenhum
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`ITrack`** - Os dados brutos da faixa

  ```js
  const track = searchResult.tracks[0];
  const rawData = track.raw();
  
  console.log(rawData);
  // Pode ser usado para serializar dados da faixa
  ```
  ::
::
::

### unresolvedTrack
::field{name="unresolvedTrack" type="static method"}
::stack
  ::card
  ---
  icon: 'lucide:search'
  ---
  #title
  Faixa Não Resolvida

  #description
  Cria uma faixa não resolvida a partir de metadados básicos e tenta encontrar uma faixa real correspondente.
  <br>
  <h5>Parâmetros</h5>

  ::field-group
    ::field{name="options" type="object" required}
    Objeto contendo as opções da faixa
    ::
    ::field{name="options.title" type="string" required}
    O título da faixa a ser pesquisado
    ::
    ::field{name="options.author" type="string" required}
    O autor/artista da faixa
    ::
    ::field{name="options.duration" type="number"}
    Duração opcional da faixa em milissegundos, usada para encontrar a correspondência mais próxima
    ::
    ::field{name="options.source" type="string"}
    Plataforma de origem opcional para pesquisar (o padrão é o defaultPlatformSearch do gerenciador)
    ::
  ::
  ::

  ::card
  ---
  icon: 'lucide:fold-horizontal'
  icon-size: 26
  horizontal: true
  ---
  #title
  Retorna & Exemplo

  #description
  **Retorna**
  • **`Promise<Track>`** - Uma promessa que resolve para a faixa encontrada, ou uma faixa de fallback se nenhuma for encontrada

  ```js
  // Criar uma faixa não resolvida a partir de metadados básicos
  const track = await Track.unresolvedTrack({
    title: "Never Gonna Give You Up",
    author: "Rick Astley",
    duration: 213000  // opcional, ajuda a encontrar a correspondência mais próxima
  });
  
  // Reproduzir a faixa resolvida
  player.queue.add(track);
  player.play();
  ```
  ::
::
::

## Carregamento Parcial de Faixa

::card
---
icon: lucide:settings
---

#title
Configuração de Faixa Parcial

#description
Configure o Manager para carregar apenas propriedades de faixa específicas para melhor desempenho

#content
```js
const { Manager } = require('moonlink.js');

// Criar o Manager com a opção partialTrack
const manager = new Manager({
  nodes: [
    // ... configuração do nó
  ],
  options: {
    // Carregar apenas estas propriedades inicialmente
    partialTrack: ["url", "duration", "artworkUrl"]
  },
  sendPayload: // ... função de payload
});

// ... resto do seu código

// Quando você precisar de todos os dados da faixa
const track = searchResult.tracks[0];
if (track.isPartialTrack()) {
  // Isso decodificará a faixa e carregará todas as propriedades
  track.resolveData();
}
```

#footer
O carregamento parcial de faixas pode melhorar significativamente o desempenho ao lidar com muitas faixas
::

## Exemplo de Uso

::card
---
icon: lucide:code
---

#title
Exemplo Completo

#description
Um exemplo completo de como trabalhar com a classe Track

#content
```js
const { Manager } = require('moonlink.js');

// Criar o Manager
const manager = new Manager({
  // ... opções
});

// Inicializar o Manager
manager.init('client-id');

// Criar um player
const player = manager.createPlayer({
  guildId: '123456789012345678',
  voiceChannelId: '123456789012345678',
  textChannelId: '123456789012345678'
});

// Pesquisar e reproduzir uma faixa
async function playTrack(query, requester) {
  const result = await manager.search({
    query,
    source: 'youtube'
  });

  if (result.loadType === 'track') {
    const track = result.tracks[0];
    
    // Definir o solicitante
    track.setRequester(requester);
    
    // Adicionar à fila
    player.queue.add(track);
    
    // Iniciar a reprodução se não estiver tocando
    if (!player.playing) {
      player.play();
    }
    
    return {
      title: track.title,
      author: track.author,
      duration: track.duration,
      url: track.url,
      artworkUrl: track.artworkUrl
    };
  }
  
  return null;
}

// Exemplo de uso com Discord.js
client.on('messageCreate', async (message) => {
  if (message.content.startsWith('!play')) {
    const query = message.content.slice(6).trim();
    
    const trackInfo = await playTrack(query, message.author);
    
    if (trackInfo) {
      message.channel.send(`Adicionado à fila: **${trackInfo.title}** por ${trackInfo.author}`);
    } else {
      message.channel.send('Nenhuma faixa encontrada.');
    }
  }
});
```

#footer
Adapte este exemplo às suas necessidades específicas
::

::button-link{right-icon="lucide:arrow-right" to="/api/events"}
  Continuar para Eventos
::